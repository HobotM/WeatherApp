@page "/weather"
@inject WeatherService WeatherService

<EditForm Model="@WeatherRequest" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <InputText id="city" @bind-Value="@WeatherRequest.City"></InputText>

    <button type="submit">Get Weather</button>
</EditForm>

@if (WeatherResponse != null)
{
    <h1>Weather in @WeatherResponse.Name</h1>
    <p>Temperature: @(WeatherResponse.Main?.Temp ?? 0.0) â„ƒ</p>
    <p>Description: @(WeatherResponse.Weather?.FirstOrDefault()?.Description ?? "N/A")</p>
    <p>Wind speed: @(WeatherResponse.Wind?.Speed ?? 0.0) m/s</p>
}

@code {
    WeatherRequest WeatherRequest = new WeatherRequest();
    WeatherResponse WeatherResponse;

    private async Task HandleValidSubmit()
    {
        WeatherResponse = await WeatherService.GetWeather(WeatherRequest.City);
    }
}
